{% extends "base.html" %}
{% block title %}{{ super() }}{% endblock %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block article %}
<script>
  function playPause(mp3Id, imageId){
    mp3 = document.getElementById(mp3Id);
    image = document.getElementById(imageId);
    if (image.src.indexOf("play.png") >= 0 ) {
      mp3.play();
      image.setAttribute("src", "{{ url_for('static', filename='imgs/pause.png') }}");
    }   
    else if (image.src.indexOf("pause.png") >= 0 ) {
      mp3.pause();
      mp3.currentTime = 0;
      image.setAttribute("src", "{{ url_for('static', filename='imgs/play.png') }}");
    } 
  }

</script>
<article>
  <table class="listSound">
    <tr>
      <th>n</th><th>filename</th><th>dateTime</th><th>size</th><th>del</th>
    </tr>
    {% for fileName in fileList %}
        <tr>
          <td>{{ fileName[0] }}</td>
          <td>
            <img
              id="mp3_{{ fileName[0] }}" 
              width="20" 
              src="{{ url_for('static', filename='imgs/play.png') }}"
              onclick="playPause('{{ fileName[3] }}', this.id)">
            <audio id="{{ fileName[3] }}"><source src="/static/snds/{{ fileName[3] }}"></audio>{{ fileName[3] }}
          </td>
          <td>{{ fileName[2] }}</td>
          <td>{{ fileName[1] }}</td>
          <td><a href="{{url_for('delFile', fileName=fileName[3]) }}"><img width="20"src="{{ url_for('static', filename='imgs/delete.png') }}"></a></td>
        </tr>
    {% endfor %}
    <tr>
      <form method=post enctype=multipart/form-data action="/upload">
      <td colspan="2"><input type="file" name="file" method="post"></td><td><input type="submit" value="Upload"></td><td>{{ maxMb }}.0M</td><td>max</td>
    </tr>
  </table>
  {{ messageList() }}
</article>
{% endblock %}
